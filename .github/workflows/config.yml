name: Test Nginx Configuration

on:
  push:
    branches: [ main ]

jobs:
  test-nginx-configuration:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Install Nginx
        run: |
         sudo apt update
         sudo apt install -y nginx
    
      - name: Move nginx.conf file
        run: sudo mv nginx.conf ./nginx/temp/

      - name: Test nginx configuration
        run: sudo nginx -t -c ./nginx/temp/nginx.conf
    
      - name: Test Nginx configuration
        run: sudo nginx -t
      
      - name: Display test result
        run: sudo cat /var/log/nginx/error.log
